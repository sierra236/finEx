"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["219"],{426:function(e,r,t){t.r(r),t.d(r,{__experimental_PricingTable:()=>f});var i=t(8635),a=t(3799),o=t(9144),n=t(1673),l=t(6620),c=t(3064),s=t(918),d=t(5631),p=t(4462),m=t(5295),u=t(9241);function h(e){let{plans:r,planPeriod:t,setPlanPeriod:a,onSelect:o,isCompact:n,props:l}=e;return(0,i.tZ)(m.InternalThemeProvider,{children:(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTable,sx:e=>({"--grid-min-size":n?"11.75rem":"20rem","--grid-max-columns":"infinity","--grid-gap":e.space.$4,"--max-column-width":"100% / var(--grid-max-columns, infinity) - var(--grid-gap)","--column-width":"max(var(--max-column-width), min(var(--grid-min-size, 10rem), 100%))",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(var(--column-width), 1fr))",gap:"var(--grid-gap-y, var(--grid-gap, ".concat(e.space.$4,")) var(--grid-gap, ").concat(e.space.$4,")"),alignItems:"start",width:"100%",minWidth:"0"}),"data-variant":n?"compact":"default",children:null==r?void 0:r.map(e=>(0,i.tZ)(g,{plan:e,planPeriod:t,setPlanPeriod:a,onSelect:o,props:l,isCompact:n},e.id))})})}function g(e){let{plan:r,planPeriod:t,setPlanPeriod:a,onSelect:o,props:n,isCompact:l=!1}=e,s="default"===n.layout,p=s&&n.ctaPosition||"top",h=s&&n.collapseFeatures||!1,{id:g,slug:y,subscriptionIdForCurrentSubscriber:B,features:T}=r,f=T.length>0;return(0,i.BX)(c.Box,{elementDescriptor:c.descriptors.pricingTableCard,elementId:c.descriptors.pricingTableCard.setId(y),sx:e=>({display:"flex",flexDirection:"column",background:m.common.mergedColorsBackground(u.O9.setAlpha(e.colors.$colorBackground,1),e.colors.$neutralAlpha50),borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,boxShadow:l?void 0:e.shadows.$cardBoxShadow,borderRadius:e.radii.$xl,overflow:"hidden",textAlign:"left"}),"data-variant":l?"compact":"default",children:[(0,i.tZ)(x,{plan:r,isCompact:l,isActivePlan:!!B,planPeriod:t,setPlanPeriod:a}),(0,i.BX)(d.ReversibleContainer,{reverse:"top"===p,children:[!h&&f?(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTableCardFeatures,sx:e=>({display:"flex",flexDirection:"column",flex:"1",padding:l?e.space.$3:e.space.$4,backgroundColor:e.colors.$colorBackground,borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100}),"data-variant":l?"compact":"default",children:(0,i.tZ)(b,{plan:r,isCompact:l})}):null,(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTableCardAction,sx:e=>({marginTop:"auto",padding:l?e.space.$3:e.space.$4,borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100,background:h||!f?e.colors.$colorBackground:void 0}),children:(0,i.tZ)(c.Button,{block:!0,textVariant:l?"buttonSmall":"buttonLarge",variant:l||B?"bordered":"solid",colorScheme:l||B?"secondary":"primary",localizationKey:B?(0,c.localizationKeys)("__experimental_commerce.manageMembership"):(0,c.localizationKeys)("__experimental_commerce.getStarted"),onClick:()=>{o(r)}})})]})]},g)}let x=o.forwardRef((e,r)=>{let t=(0,s.Tb)(),{animations:a}=(0,c.useAppearance)().parsedLayout,{plan:n,isCompact:l,planPeriod:m,setPlanPeriod:u}=e,{name:h,avatarUrl:g,subscriptionIdForCurrentSubscriber:x,annualMonthlyAmount:b}=n,y=!t&&!0===a,B=o.useMemo(()=>b<=0?n.amountFormatted:"annual"===m?n.annualMonthlyAmountFormatted:n.amountFormatted,[b,m,n.amountFormatted,n.annualMonthlyAmountFormatted]);return(0,i.BX)(c.Box,{ref:r,elementDescriptor:c.descriptors.pricingTableCardHeader,sx:e=>({width:"100%",padding:l?e.space.$3:e.space.$4}),"data-variant":l?"compact":"default",children:[g||x?(0,i.BX)(c.Box,{elementDescriptor:c.descriptors.pricingTableCardAvatarBadgeContainer,sx:e=>({marginBlockEnd:e.space.$3,display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:e.space.$3,float:g||x?void 0:"right"}),children:[g?(0,i.tZ)(d.Avatar,{boxElementDescriptor:c.descriptors.pricingTableCardAvatar,size:e=>40,title:h,initials:h[0],rounded:!1,imageUrl:g}):null,(0,i.tZ)(d.ReversibleContainer,{reverse:!g,children:x?(0,i.tZ)(c.Span,{elementDescriptor:c.descriptors.pricingTableCardBadgeContainer,sx:{flexBasis:g?"100%":void 0},children:(0,i.tZ)(c.Badge,{elementDescriptor:c.descriptors.pricingTableCardBadge,localizationKey:(0,c.localizationKeys)("badge__currentPlan"),colorScheme:"secondary"})}):null})]}):null,(0,i.tZ)(c.Heading,{elementDescriptor:c.descriptors.pricingTableCardTitle,as:"h2",textVariant:l?"h3":"h2",children:n.name}),!l&&n.description?(0,i.tZ)(c.Text,{elementDescriptor:c.descriptors.pricingTableCardDescription,variant:"subtitle",colorScheme:"secondary",children:n.description}):null,(0,i.tZ)(c.Flex,{elementDescriptor:c.descriptors.pricingTableCardFeeContainer,"data-variant":l?"compact":"default",align:"center",wrap:"wrap",sx:e=>({marginTop:l?e.space.$2:e.space.$3,columnGap:e.space.$1x5}),children:n.hasBaseFee?(0,i.BX)(i.HY,{children:[(0,i.BX)(c.Text,{elementDescriptor:c.descriptors.pricingTableCardFee,variant:l?"h2":"h1",colorScheme:"body",children:[n.currencySymbol,B]}),(0,i.tZ)(c.Text,{elementDescriptor:c.descriptors.pricingTableCardFeePeriod,variant:"caption",colorScheme:"secondary",sx:e=>({textTransform:"lowercase",":before":{content:'"/"',marginInlineEnd:e.space.$1}}),localizationKey:(0,c.localizationKeys)("__experimental_commerce.month")}),b>0?(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTableCardFeePeriodNotice,sx:[e=>({width:"100%",display:"grid",gridTemplateRows:"annual"===m?"1fr":"0fr"}),e=>({transition:y?"grid-template-rows ".concat(e.transitionDuration.$slower," ").concat(e.transitionTiming.$slowBezier):"none"})],inert:"annual"!==m?"true":void 0,children:(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTableCardFeePeriodNoticeInner,sx:{overflow:"hidden",minHeight:0},children:(0,i.BX)(c.Text,{elementDescriptor:c.descriptors.pricingTableCardFeePeriodNoticeLabel,variant:"caption",colorScheme:"secondary",sx:e=>({width:"100%",display:"flex",alignItems:"center",columnGap:e.space.$1}),children:[(0,i.tZ)(c.Icon,{icon:p.I$,colorScheme:"neutral",size:"sm","aria-hidden":!0})," ",(0,i.tZ)(c.Span,{localizationKey:(0,c.localizationKeys)("__experimental_commerce.billedAnnually")})]})})}):null]}):(0,i.tZ)(c.Text,{elementDescriptor:c.descriptors.pricingTableCardFee,variant:l?"h2":"h1",localizationKey:(0,c.localizationKeys)("__experimental_commerce.free"),colorScheme:"body"})}),n.hasBaseFee&&b>0&&u?(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTableCardPeriodToggle,sx:e=>({display:"flex",marginTop:e.space.$3}),children:(0,i.BX)(d.SegmentedControl.Root,{"aria-label":"Set pay period",value:m,onChange:e=>u(e),children:[(0,i.tZ)(d.SegmentedControl.Button,{value:"month",text:"Monthly"}),(0,i.tZ)(d.SegmentedControl.Button,{value:"annual",text:"Annually"})]})}):null]})}),b=o.forwardRef((e,r)=>{let{plan:t,isCompact:a}=e,n=t.features.length,[l,s]=o.useState(!1),d=a&&n>3;return(0,i.BX)(c.Box,{ref:r,elementDescriptor:c.descriptors.pricingTableCardFeatures,sx:e=>({display:"grid",flex:"1",rowGap:a?e.space.$2:e.space.$3}),children:[(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTableCardFeaturesList,"data-variant":a?"compact":"default",as:"ul",role:"list",sx:e=>({display:"grid",flex:"1",rowGap:a?e.space.$2:e.space.$3}),children:t.features.slice(0,l||!d?n:3).map(e=>(0,i.BX)(c.Box,{elementDescriptor:c.descriptors.pricingTableCardFeaturesListItem,elementId:c.descriptors.pricingTableCardFeaturesListItem.setId(e.slug),as:"li",sx:e=>({display:"flex",alignItems:"baseline",gap:e.space.$2}),children:[(0,i.tZ)(c.Icon,{icon:p.Jr,colorScheme:"neutral",size:"sm","aria-hidden":!0,sx:e=>({transform:"translateY(".concat(e.space.$0x25,")")})}),(0,i.tZ)(c.Span,{elementDescriptor:c.descriptors.pricingTableCardFeaturesListItemContent,children:(0,i.tZ)(c.Text,{elementDescriptor:c.descriptors.pricingTableCardFeaturesListItemTitle,colorScheme:"body",sx:e=>({fontWeight:e.fontWeights.$normal}),children:e.name})})]},e.id))}),d&&(0,i.BX)(c.SimpleButton,{onClick:()=>{s(e=>!e)},variant:"link",sx:e=>({marginBlockStart:e.space.$2,gap:e.space.$1}),children:[(0,i.tZ)(c.Icon,{icon:l?p.WF:p.v3,colorScheme:"neutral",size:"md","aria-hidden":!0}),l?"Hide features":"See all features"]})]})});function y(e){let{plans:r=[],planPeriod:t,setPlanPeriod:a,onSelect:n,highlightedPlan:l}=e,h=(0,s.Tb)(),{animations:g}=(0,c.useAppearance)().parsedLayout,x=!h&&!0===g,b=o.useId(),y="".concat(b,"-segmented-control"),B=e=>({transition:x?"grid-template-rows ".concat(e.transitionDuration.$slower," ").concat(e.transitionTiming.$slowBezier):"none"}),T=e=>({background:m.common.mergedColorsBackground(u.O9.setAlpha(e.colors.$colorBackground,1),e.colors.$neutralAlpha25)}),f=o.useMemo(()=>"repeat(".concat(r.length+1,", minmax(9.375rem,1fr))"),[r.length]),D=o.useMemo(()=>r.some(e=>e.annualMonthlyAmount>0),[r]),S=o.useMemo(()=>{let e=new Set;return r.forEach(r=>{let{features:t}=r;t.forEach(r=>{let{name:t}=r;return e.add(t)})}),Array.from(e)},[r]);return r.length?(0,i.tZ)(m.InternalThemeProvider,{children:(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTableMatrixRoot,sx:e=>({position:"relative",minWidth:"100%",display:"grid",isolation:"isolate",backgroundColor:e.colors.$colorBackground,[m.mqu.md]:{overflowX:"auto"}}),children:(0,i.BX)(c.Box,{elementDescriptor:c.descriptors.pricingTableMatrixTable,role:"table",children:[(0,i.tZ)(c.Box,{elementDescriptor:[c.descriptors.pricingTableMatrixRowGroup,c.descriptors.pricingTableMatrixRowGroupHeader],role:"rowgroup",sx:e=>({position:"sticky",top:0,backgroundColor:e.colors.$colorBackground,borderBottomWidth:e.borderWidths.$normal,borderBottomStyle:e.borderStyles.$solid,borderBottomColor:e.colors.$neutralAlpha100,zIndex:1}),children:(0,i.BX)(c.Box,{elementDescriptor:[c.descriptors.pricingTableMatrixRow,c.descriptors.pricingTableMatrixRowHeader],role:"row",sx:{display:"grid",gridTemplateColumns:f},children:[(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTableMatrixColumnHeader,role:"columnheader",sx:e=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-end",rowGap:e.space.$3,paddingBlockEnd:e.space.$12,paddingInlineStart:e.space.$3}),children:D?(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Text,{id:y,colorScheme:"secondary",variant:"caption",children:"Billing cycle"}),(0,i.BX)(d.SegmentedControl.Root,{"aria-labelledby":y,value:t,onChange:e=>a(e),children:[(0,i.tZ)(d.SegmentedControl.Button,{value:"month",text:"Monthly"}),(0,i.tZ)(d.SegmentedControl.Button,{value:"annual",text:"Annually"})]})]}):null}),r.map(e=>{let r=e.slug===l,a=e.annualMonthlyAmount<=0?e.amountFormatted:"annual"===t?e.annualMonthlyAmountFormatted:e.amountFormatted;return(0,i.BX)(c.Box,{elementDescriptor:c.descriptors.pricingTableMatrixColumnHeader,role:"columnheader",sx:[e=>({display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,borderStartStartRadius:e.radii.$xl,borderStartEndRadius:e.radii.$xl}),r&&T],"data-highlighted":r,children:[(0,i.BX)(c.Box,{sx:e=>({width:"100%",padding:e.space.$4}),children:[e.avatarUrl||r?(0,i.BX)(c.Span,{sx:e=>({width:"100%",display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBlockEnd:e.space.$3}),children:[e.avatarUrl?(0,i.tZ)(d.Avatar,{elementDescriptor:c.descriptors.pricingTableMatrixAvatar,size:e=>40,title:e.name,initials:e.name[0],rounded:!1,imageUrl:e.avatarUrl}):null,r?(0,i.tZ)(c.Badge,{elementDescriptor:c.descriptors.pricingTableMatrixBadge,colorScheme:"secondary",children:"Popular"}):null]}):null,(0,i.tZ)(c.Heading,{elementDescriptor:c.descriptors.pricingTableMatrixPlanName,textVariant:"h3",children:e.name}),(0,i.tZ)(c.Flex,{align:"center",wrap:"wrap",sx:e=>({marginTop:e.space.$2,columnGap:e.space.$1x5}),children:e.hasBaseFee?(0,i.BX)(i.HY,{children:[(0,i.BX)(c.Text,{elementDescriptor:c.descriptors.pricingTableMatrixFee,variant:"h2",colorScheme:"body",children:[e.currencySymbol,a]}),(0,i.tZ)(c.Text,{elementDescriptor:c.descriptors.pricingTableMatrixFeePeriod,variant:"caption",colorScheme:"secondary",sx:e=>({textTransform:"lowercase",":before":{content:'"/"',marginInlineEnd:e.space.$1}}),localizationKey:(0,c.localizationKeys)("__experimental_commerce.month")}),e.annualMonthlyAmount>0?(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTableMatrixFeePeriodNotice,sx:[e=>({width:"100%",display:"grid",gridTemplateRows:"annual"===t?"1fr":"0fr"}),B],inert:"annual"!==t?"true":void 0,children:(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTableMatrixFeePeriodNoticeInner,sx:{overflow:"hidden",minHeight:0},children:(0,i.BX)(c.Text,{elementDescriptor:c.descriptors.pricingTableMatrixFeePeriodNoticeLabel,variant:"caption",colorScheme:"secondary",sx:e=>({width:"100%",display:"flex",alignItems:"center",columnGap:e.space.$1}),children:[(0,i.tZ)(c.Icon,{icon:p.I$,colorScheme:"neutral",size:"sm","aria-hidden":!0})," ",(0,i.tZ)(c.Span,{localizationKey:(0,c.localizationKeys)("__experimental_commerce.billedAnnually")})]})})}):null]}):(0,i.tZ)(c.Text,{elementDescriptor:c.descriptors.pricingTableMatrixFee,variant:"h2",localizationKey:(0,c.localizationKeys)("__experimental_commerce.free"),colorScheme:"body"})})]}),(0,i.tZ)(c.Box,{sx:e=>({width:"100%",marginBlockStart:"auto",marginBlockEnd:e.space.$8,paddingBlockStart:e.space.$2,paddingBlockEnd:e.space.$4,paddingInline:e.space.$4}),children:(0,i.tZ)(c.Button,{block:!0,variant:"bordered",colorScheme:r?"primary":"secondary",textVariant:"buttonSmall",size:"xs",onClick:()=>{n(e)},localizationKey:e.subscriptionIdForCurrentSubscriber?"Manage":(0,c.localizationKeys)("__experimental_commerce.getStarted")})})]},e.slug)})]})}),(0,i.BX)(c.Box,{elementDescriptor:[c.descriptors.pricingTableMatrixRowGroup,c.descriptors.pricingTableMatrixRowGroupBody],role:"rowgroup",children:[S.map(e=>(0,i.BX)(c.Box,{elementDescriptor:[c.descriptors.pricingTableMatrixRow,c.descriptors.pricingTableMatrixRowBody],role:"row",sx:e=>({position:"relative",display:"grid",gridTemplateColumns:f,borderBottomWidth:e.borderWidths.$normal,borderBottomStyle:e.borderStyles.$solid,borderBottomColor:e.colors.$neutralAlpha100,":after":{content:'""',position:"absolute",inset:0,pointerEvents:"none",backgroundColor:e.colors.$neutralAlpha25,opacity:0},":hover:after":{opacity:1}}),children:[(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTableMatrixCell,role:"cell",sx:e=>({padding:e.space.$3}),children:(0,i.tZ)(c.Text,{colorScheme:"body",children:e})}),r.map(r=>{let t=r.slug===l,a=r.features.some(r=>r.name===e);return(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.pricingTableMatrixCell,role:"cell",sx:[e=>({display:"grid",placeContent:"center",padding:e.space.$3}),t&&T],"data-highlighted":t,"data-checked":a,children:a&&(0,i.tZ)(c.Icon,{icon:p.Jr,colorScheme:"neutral",size:"sm","aria-label":"Included"})},r.slug)})]},e)),(0,i.BX)(c.Box,{elementDescriptor:c.descriptors.pricingTableMatrixFooter,sx:{display:"grid",gridTemplateColumns:f},children:[(0,i.tZ)(c.Box,{elementDescriptor:[c.descriptors.pricingTableMatrixCell,c.descriptors.pricingTableMatrixCellFooter]}),r.map(e=>{let r=e.slug===l;return(0,i.tZ)(c.Box,{elementDescriptor:[c.descriptors.pricingTableMatrixCell,c.descriptors.pricingTableMatrixCellFooter],sx:[e=>({height:e.space.$10,borderEndStartRadius:e.radii.$xl,borderEndEndRadius:e.radii.$xl}),r&&T],"data-highlighted":r},e.slug)})]})]})]})})}):null}function B(e){let{isOpen:r,setIsOpen:t,portalProps:n,strategy:l,subscription:s,subscriberType:p,setPlanPeriod:h,onSubscriptionCancel:g}=e,{organization:x}=(0,a.o8)(),[b,y]=(0,o.useState)(!1),[B,f]=(0,o.useState)(!1),[D,S]=(0,o.useState)();if(!s)return null;let v=s.plan.features,C=v.length>0,$=async()=>{S(void 0),f(!0),await s.cancel({orgId:"org"===p?null==x?void 0:x.id:void 0}).then(()=>{f(!1),g(),t(!1)}).catch(e=>{(0,u.S3)(e,[],S),f(!1)})};return(0,i.tZ)(m.InternalThemeProvider,{children:(0,i.BX)(d.Drawer.Root,{open:r,onOpenChange:t,strategy:l,portalProps:n,children:[(0,i.tZ)(d.Drawer.Overlay,{}),(0,i.BX)(d.Drawer.Content,{children:[(0,i.tZ)(d.Drawer.Header,{sx:e=>C?null:{flex:1,borderBottomWidth:0,background:e.colors.$colorBackground},children:(0,i.tZ)(T,{plan:s.plan,planPeriod:s.planPeriod,setPlanPeriod:h,closeSlot:(0,i.tZ)(d.Drawer.Close,{})})}),C?(0,i.tZ)(d.Drawer.Body,{children:(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.subscriptionDetailFeaturesList,as:"ul",role:"list",sx:e=>({display:"grid",rowGap:e.space.$4,padding:e.space.$4}),children:v.map(e=>(0,i.BX)(c.Box,{elementDescriptor:c.descriptors.subscriptionDetailFeaturesListItem,as:"li",sx:e=>({display:"flex",alignItems:"baseline",gap:e.space.$3}),children:[e.avatarUrl?(0,i.tZ)(d.Avatar,{size:e=>24,title:e.name,initials:e.name[0],rounded:!1,imageUrl:e.avatarUrl}):null,(0,i.BX)(c.Span,{elementDescriptor:c.descriptors.subscriptionDetailFeaturesListItemContent,children:[(0,i.tZ)(c.Text,{elementDescriptor:c.descriptors.subscriptionDetailFeaturesListItemTitle,colorScheme:"body",sx:e=>({fontWeight:e.fontWeights.$medium}),children:e.name}),e.description?(0,i.tZ)(c.Text,{elementDescriptor:c.descriptors.subscriptionDetailFeaturesListItemDescription,colorScheme:"secondary",sx:e=>({marginBlockStart:e.space.$0x25,fontSize:e.fontSizes.$xs}),children:e.description}):null]})]},e.id))})}):null,(0,i.tZ)(d.Drawer.Footer,{children:(0,i.tZ)(c.Button,{variant:"bordered",colorScheme:"secondary",size:"sm",textVariant:"buttonLarge",block:!0,onClick:()=>y(!0),children:"Cancel Subscription"})}),(0,i.BX)(d.Drawer.Confirmation,{open:b,onOpenChange:y,actionsSlot:(0,i.BX)(i.HY,{children:[!B&&(0,i.tZ)(c.Button,{variant:"ghost",size:"sm",textVariant:"buttonLarge",onClick:()=>{S(void 0),y(!1)},children:"Keep Subscription"}),(0,i.tZ)(c.Button,{variant:"solid",colorScheme:"danger",size:"sm",textVariant:"buttonLarge",isLoading:B,onClick:$,children:"Cancel Subscription"})]}),children:[(0,i.BX)(c.Heading,{elementDescriptor:c.descriptors.drawerConfirmationTitle,as:"h2",textVariant:"h3",children:["Cancel ",s.plan.name," Subscription?"]}),(0,i.BX)(c.Text,{elementDescriptor:c.descriptors.drawerConfirmationDescription,colorScheme:"secondary",children:["You can keep using “",s.plan.name,"” features until [DATE], after which you will no longer have access."]}),D&&(0,i.tZ)(d.Alert,{colorScheme:"danger",children:"string"==typeof D?D:D.message})]})]})]})})}let T=o.forwardRef((e,r)=>{let{plan:t,planPeriod:a,closeSlot:n}=e,{name:l,avatarUrl:s,subscriptionIdForCurrentSubscriber:m,annualMonthlyAmount:u}=t,h=o.useMemo(()=>u<=0?t.amountFormatted:"annual"===a?t.annualMonthlyAmountFormatted:t.amountFormatted,[u,a,t.amountFormatted,t.annualMonthlyAmountFormatted]);return(0,i.BX)(c.Box,{ref:r,elementDescriptor:c.descriptors.subscriptionDetailHeader,sx:e=>({width:"100%",padding:e.space.$4}),children:[s||m||n?(0,i.BX)(c.Box,{elementDescriptor:c.descriptors.subscriptionDetailAvatarBadgeContainer,sx:e=>({marginBlockEnd:e.space.$3,display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:e.space.$3,float:s||m?void 0:"right"}),children:[s?(0,i.tZ)(d.Avatar,{boxElementDescriptor:c.descriptors.subscriptionDetailAvatar,size:e=>40,title:l,initials:l[0],rounded:!1,imageUrl:s}):null,(0,i.BX)(d.ReversibleContainer,{reverse:!s,children:[n,m?(0,i.tZ)(c.Span,{elementDescriptor:c.descriptors.subscriptionDetailBadgeContainer,sx:{flexBasis:n&&s?"100%":void 0},children:(0,i.tZ)(c.Badge,{elementDescriptor:c.descriptors.subscriptionDetailBadge,localizationKey:(0,c.localizationKeys)("badge__currentPlan"),colorScheme:"secondary"})}):null]})]}):null,(0,i.tZ)(c.Heading,{elementDescriptor:c.descriptors.subscriptionDetailTitle,as:"h2",textVariant:"h2",children:t.name}),t.description?(0,i.tZ)(c.Text,{elementDescriptor:c.descriptors.subscriptionDetailDescription,variant:"subtitle",colorScheme:"secondary",children:t.description}):null,(0,i.tZ)(c.Flex,{elementDescriptor:c.descriptors.subscriptionDetailFeeContainer,align:"center",wrap:"wrap",sx:e=>({marginTop:e.space.$3,columnGap:e.space.$1x5}),children:t.hasBaseFee?(0,i.BX)(i.HY,{children:[(0,i.BX)(c.Text,{elementDescriptor:c.descriptors.subscriptionDetailFee,variant:"h1",colorScheme:"body",children:[t.currencySymbol,h]}),(0,i.tZ)(c.Text,{elementDescriptor:c.descriptors.subscriptionDetailFeePeriod,variant:"caption",colorScheme:"secondary",sx:e=>({textTransform:"lowercase",":before":{content:'"/"',marginInlineEnd:e.space.$1}}),localizationKey:(0,c.localizationKeys)("__experimental_commerce.month")}),u>0?(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.subscriptionDetailFeePeriodNotice,sx:[e=>({width:"100%",display:"grid",gridTemplateRows:"annual"===a?"1fr":"0fr"})],inert:"annual"!==a?"true":void 0,children:(0,i.tZ)(c.Box,{elementDescriptor:c.descriptors.subscriptionDetailFeePeriodNoticeInner,sx:{overflow:"hidden",minHeight:0},children:(0,i.BX)(c.Text,{elementDescriptor:c.descriptors.subscriptionDetailFeePeriodNoticeLabel,variant:"caption",colorScheme:"secondary",sx:e=>({width:"100%",display:"flex",alignItems:"center",columnGap:e.space.$1}),children:[(0,i.tZ)(c.Icon,{icon:p.I$,colorScheme:"neutral",size:"sm","aria-hidden":!0})," ",(0,i.tZ)(c.Span,{localizationKey:(0,c.localizationKeys)("__experimental_commerce.billedAnnually")})]})})}):null]}):(0,i.tZ)(c.Text,{elementDescriptor:c.descriptors.subscriptionDetailFee,variant:"h1",localizationKey:(0,c.localizationKeys)("__experimental_commerce.free"),colorScheme:"body"})})]})}),f=e=>{var r;let t=(0,a.cL)(),{mode:d="mounted",subscriberType:p}=(0,l.usePricingTableContext)(),{plans:m,subscriptions:u,revalidate:g}=(0,s.xn)({subscriberType:p}),[x,b]=(0,o.useState)("month"),[T,f]=(0,o.useState)(),[D,S]=(0,o.useState)(!1),v=e=>{t.isSignedIn||t.redirectToSignIn();let r=u.find(r=>r.id===e.subscriptionIdForCurrentSubscriber);r?(f(r),S(!0)):t.__internal_openCheckout({planId:e.id,planPeriod:x,subscriberType:p,onSubscriptionComplete:C,portalId:"modal"===d?n.TD:void 0})},C=()=>{g()};return(0,i.BX)(i.HY,{children:["modal"!==d&&"matrix"===e.layout?(0,i.tZ)(y,{plans:m||[],planPeriod:x,setPlanPeriod:b,onSelect:v,highlightedPlan:e.highlightPlan}):(0,i.tZ)(h,{plans:m,planPeriod:x,setPlanPeriod:b,onSelect:v,isCompact:"modal"===d,props:e}),(0,i.tZ)(c.AppearanceProvider,{appearanceKey:"checkout",appearance:null===(r=e.checkoutProps)||void 0===r?void 0:r.appearance,children:(0,i.tZ)(B,{isOpen:D,setIsOpen:S,subscription:T,subscriberType:p,setPlanPeriod:b,strategy:"mounted"===d?"fixed":"absolute",portalProps:{id:"modal"===d?n.TD:void 0},onSubscriptionCancel:C})})]})}}}]);